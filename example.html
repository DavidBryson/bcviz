<html>
	<head>
		<meta charset="utf-8">
		<title>Bamcheck ex.1 - IC</title>
		<script src="http://d3js.org/d3.v3.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="myStyle.css">
		<script src="lineChart.js"></script>
		<script src="qualityChart.js"></script>
		<script src="rainbowvis.js"></script>
		<script src="indelDist.js"></script>
		<script src="coverage.js"></script>
		<script src="GCDepth.js"></script>
		<script src="readBCfile.js"></script>
	</head>
	<body>
		<svg id="svg1"></svg>
		<svg id="svg2"></svg>
		<script>
			/*var mousewheelevt=(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel"
			svg1.addEventListener(mousewheelevt, zoom, false)
			var xMin = 0, xMax = 74;
			var yMin = 22.5, yMax = 27.5;
			function zoom (e) {
				if (e.preventDefault){
					e.preventDefault()
				}
				if (e.wheelDelta > 0){
					xMin += 5;
					xMax -= 5;
					yMin += 0.5;
					yMax -= 0.5;
					aChart.x.domain([xMin, xMax]);
					aChart.y.domain([yMin, yMax]);
					aChart.draw();
				}else{
					xMin -= 5;
					xMax += 5;
					yMin -= 0.5;
					yMax += 0.5;
					aChart.x.domain([xMin, xMax]);
					aChart.y.domain([yMin, yMax]);
					aChart.draw();
				}
			}*/
			var graphCount = 0;
			var split = false;
			var points = [];
			points.push(formatData(readFile("7843_2-1.bc")));
			points.push(formatData(readFile("7843_2-2.bc")));
			points.push(formatData(readFile("7843_2-3.bc")));
			points.push(formatData(readFile("7843_2-4.bc")));
			var keysIC = {
				all: ["insertions_fwd","deletions_fwd","insertions_rev","deletions_rev"],
				fwd: ["insertions_fwd","deletions_fwd"],
				reverse: ["insertions_rev","deletions_rev"]
			};
			var keysGC = ["First_Fragments", "Last_Fragments"];
			var keysGCC = ["A", "C", "G", "T"];
			//qualityChart(points[graphCount][2],'#svg2');
			//qualityChart(points[graphCount][3], '#svg1');
			var aChart = new lineChart(points[graphCount][5], '#svg1', keysGCC);
			//indelDist(points[graphCount][6], '#svg1');
			//gcDepth(points[graphCount][8], '#svg1');
			function toggleSplit () {
				if(split === true){
					split = false;
				}else{
					split = true;
				}
			}
			function drawGraph () {
				$("#svg1").empty();
				$("#svg2").empty();
				if(graphCount >= points.length){
					graphCount = 0;
				}
				if(graphCount < 0){
					graphCount = points.length - 1;
				}
				if(split === true){
					splitGraphs(points[graphCount][0], '#svg1', keysIC.fwd, keysIC.reverse);
				}else{
					coverage(points[graphCount][7], '#svg1');
				}
			}
			$(window).keydown(function (e) {
				if(e.which === 188){
					graphCount--;
					drawGraph();
				}
				if(e.which === 190){
					graphCount++;
					drawGraph();
				}
				if(e.which === 13){
					toggleSplit();
					drawGraph();
				}
			})
			function changeAxis () {
				aChart.x.domain([4, 14]);
				aChart.draw();
			}
		</script>
	</body>
</html>